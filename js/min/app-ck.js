function hexToRgb(a){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:"Err: "+t}function setImage(a,t){$("canvas.logo").each(function(){var n=this,e=n.getContext("2d"),o=new Image;o.onload=function(){e.clearRect(0,0,n.width,n.height),e.drawImage(o,0,0,n.width,n.height),o=e.getImageData(0,0,n.width,n.height);for(var a=0;a<o.data.length;a+=4)o.data[a]=hexToRgb(t).r,o.data[a+1]=hexToRgb(t).g,o.data[a+2]=hexToRgb(t).b;e.putImageData(o,0,0)},o.src=a})}function changeCanvasColor(a){$("canvas.logo").each(function(){for(var t=this.getContext("2d"),n=t.getImageData(0,0,this.width,this.height),e=0;e<n.data.length;e+=4)n.data[e]=hexToRgb(a).r,n.data[e+1]=hexToRgb(a).g,n.data[e+2]=hexToRgb(a).b;t.putImageData(n,0,0)})}function defaultPos(a){a.position("icon"==a.parent().parent().attr("id")?{my:"center",at:"center",of:a.parent()}:{my:"bottom",at:"center",of:a.parent()})}$(document).foundation(),$(function(){var a=$("input#bgcolor"),t=$("input#logocolor"),n=$("#logoResetPos"),e=$("#icon"),o=$("#phone"),g=$("#tablet"),c=$("canvas.logo");e.css("background",a.val()),o.css("background",a.val()),g.css("background",a.val()),a.on("change",function(){e.css("background",a.val()),o.css("background",a.val()),g.css("background",a.val())}),c.each(function(){defaultPos($(this)),setImage("_design/trans_00.png",t.val()),$(this).draggable({containment:$(this).parent()})}),t.on("change",Foundation.utils.throttle(function(){changeCanvasColor($(this).val())},600)),n.on("click",function(){c.each(function(){defaultPos($(this))})}),$("#logoimage").on("change",function(a){var n=a.target.files,e=n[0];if(n&&e){var o=new FileReader;o.onload=function(a){var n=a.target.result,o="data:"+e.type+";base64,"+btoa(n);setImage(o,t.val())}}o.readAsBinaryString(e)})});